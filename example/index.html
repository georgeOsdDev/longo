<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Longo.js example</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
      <a href="http://www.reactivemanifesto.org/"> <img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000" src="//d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-red-right.png"> </a>
        <script type="text/javascript" src ="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
        <script type="text/javascript" src="../longo.js"></script>
        <script type="text/javascript">

          function Logging(msg){
            return function(err, result){
              console.log(msg+"-------------->");
              console.log("[error]:",err);
              console.log("[result]:",result);
              console.log("<-------------");
            };
          };

          var logResponse =


          Longo.setRoot("../")
          var db = new Longo.DB("School");
          console.log(db.getCollectionNames());



          db.collection("test").find({})
                               .done(Logging("find empty collection"));
          console.log(db.getCollectionNames());

          db.collection("test").save({name:"testdoc","val":1})
                               .done(Logging("insert"));
          db.collection("test").save({name:"testdoc2","val":2})
                               .done(Logging("insert"));

          db.collection("test").find({})
                               .done(Logging("Find all"));


          db.collection("test").find({},{"_id":0})
                               .done(Logging("Projection"));



          db.collection("test").find({"val":1})
                               .done(Logging("Find with query {\"val\":1}"));


          db.collection("test").find({"val":{"$gte":2}})
                               .done(Logging("Find with query {\"val\":{\"$gte\":2}}"));

          db.collection("test").find({"val":{"$gte":2}})
                               .onValue(Logging("Find with query {\"val\":{\"$gte\":2}}"));


        </script>
    </body>
</html>